import { ProviderClass } from '@builderbot/bot';
import type { BotContext, Button, SendOptions } from '@builderbot/bot/dist/types';
import type { PathOrFileDescriptor } from 'fs';
import NodeCache from 'node-cache';
import type polka from 'polka';
import type { IStickerOptions } from 'wa-sticker-formatter';

import { BaileysEventMap, WAMessage, WASocket, proto } from './baileyWrapper';
import type { BaileyGlobalVendorArgs } from './type';
declare class BaileysProvider extends ProviderClass<WASocket> {
    globalVendorArgs: BaileyGlobalVendorArgs;
    private reconnectAttempts;
    private maxReconnectAttempts;
    private reconnectDelay;
    msgRetryCounterCache?: NodeCache;
    userDevicesCache?: NodeCache;
    private logger;
    private logStream;
    private idsDuplicates;
    private mapSet;
    constructor(args: Partial<BaileyGlobalVendorArgs>);
    /**
     * Setup cleanup handlers
     * @description
     * - Remove existing listeners to prevent duplicates
     * - Add new listeners
     * - Add cleanup function to all listeners
     * - Add cleanup function to uncaughtException and unhandledRejection
     * - Add cleanup function to SIGINT, SIGTERM, SIGUSR1, SIGUSR2
     * - Add cleanup function to process.exit
     */
    private setupCleanupHandlers;
    private setupPeriodicCleanup;
    private cleanup;
    releaseSessionFiles(): Promise<void>;
    protected beforeHttpServerInit(): void;
    protected afterHttpServerInit(): void;
    indexHome: polka.Middleware;
    protected getMessage: (key: {
        remoteJid: string;
        id: string;
    }) => Promise<proto.Message>;
    protected saveCredsGlobal: (() => Promise<void>) | null;
    /**
     * Iniciar todo Bailey
     */
    protected initVendor: () => Promise<import("baileys").BaileysEventEmitter & {
        process(handler: (events: Partial<import("baileys").BaileysEventMap>) => void | Promise<void>): () => void;
        buffer(): void;
        createBufferedFunction<A extends any[], T>(work: (...args: A) => Promise<T>): (...args: A) => Promise<T>;
        flush(): boolean;
        isBuffering(): boolean;
    }>;
    /**
     * Map native events that the Provider class expects
     * to have a standard set of events
     * @returns
     */
    protected busEvents: () => {
        event: keyof BaileysEventMap;
        func: (arg?: any, arg2?: any) => any;
    }[];
    /**
     * @param {string} orderId
     * @param {string} orderToken
     * @example await getOrderDetails('order-id', 'order-token')
     */
    getOrderDetails: (orderId: string, orderToken: string) => Promise<import("baileys").OrderDetails>;
    /**
     * @param {string} number
     * @param {string} message
     * @example await sendMessage('+XXXXXXXXXXX', 'https://dominio.com/imagen.jpg' | 'img/imagen.jpg')
     */
    sendMedia: (number: string, imageUrl: string, text: string) => Promise<proto.WebMessageInfo>;
    /**
     * Enviar imagen
     * @param {*} number
     * @param {*} imageUrl
     * @param {*} text
     * @returns
     */
    sendImage: (number: string, filePath: string, text: any) => Promise<proto.WebMessageInfo>;
    /**
     * Enviar video
     * @param {*} number
     * @param {*} imageUrl
     * @param {*} text
     * @returns
     */
    sendVideo: (number: string, filePath: PathOrFileDescriptor, text: any) => Promise<proto.WebMessageInfo>;
    /**
     * Enviar audio
     * @alpha
     * @param {string} number
     * @param {string} message
     * @param {boolean} voiceNote optional
     * @example await sendMessage('+XXXXXXXXXXX', 'audio.mp3')
     */
    sendAudio: (number: string, audioUrl: string) => Promise<proto.WebMessageInfo>;
    /**
     *
     * @param {string} number
     * @param {string} message
     * @returns
     */
    sendText: (number: string, message: string) => Promise<proto.WebMessageInfo>;
    /**
     *
     * @param {string} number
     * @param {string} filePath
     * @example await sendMessage('+XXXXXXXXXXX', './document/file.pdf')
     */
    sendFile: (number: string, filePath: string, text: string) => Promise<proto.WebMessageInfo>;
    /**
     * @deprecated Buttons are not available in this provider, please use sendButtons instead
     * @private
     * @param {string} number
     * @param {string} text
     * @param {string} footer
     * @param {Array} buttons
     * @example await sendMessage("+XXXXXXXXXXX", "Your Text", "Your Footer", [{"buttonId": "id", "buttonText": {"displayText": "Button"}, "type": 1}])
     */
    sendButtons: (number: string, text: string, buttons: Button[]) => Promise<proto.WebMessageInfo>;
    /**
     *
     * @param {string} number
     * @param {string} text
     * @param {string} footer
     * @param {Array} poll
     * @example await sendMessage("+XXXXXXXXXXX", { poll: { "name": "You accept terms", "values": [ "Yes", "Not"], "selectableCount": 1 })
     */
    sendPoll: (numberIn: string, text: string, poll: {
        options: string[];
        multiselect: any;
    }) => Promise<false | proto.WebMessageInfo>;
    /**
     * TODO: Necesita terminar de implementar el sendMedia y sendButton guiarse:
     * https://github.com/leifermendez/bot-whatsapp/blob/4e0fcbd8347f8a430adb43351b5415098a5d10df/packages/provider/src/web-whatsapp/index.js#L165
     * @param {string} number
     * @param {string} message
     * @example await sendMessage('+XXXXXXXXXXX', 'Hello World')
     */
    sendMessage: (numberIn: string, message: string, options?: SendOptions) => Promise<any>;
    /**
     * @param {string} remoteJid
     * @param {string} latitude
     * @param {string} longitude
     * @param {any} messages
     * @example await sendLocation("xxxxxxxxxxx@c.us" || "xxxxxxxxxxxxxxxxxx@g.us", "xx.xxxx", "xx.xxxx", messages)
     */
    sendLocation: (remoteJid: string, latitude: any, longitude: any, messages?: any) => Promise<{
        status: string;
    }>;
    /**
     * @param {string} remoteJid
     * @param {string} contactNumber
     * @param {string} displayName
     * @param {string} orgName
     * @param {any} messages - optional
     * @example await sendContact("xxxxxxxxxxx@c.us" || "xxxxxxxxxxxxxxxxxx@g.us", "+xxxxxxxxxxx", "Robin Smith", messages)
     */
    sendContact: (remoteJid: any, contactNumber: {
        replaceAll: (arg0: string, arg1: string) => any;
    }, displayName: string, orgName: string, messages?: any) => Promise<{
        status: string;
    }>;
    /**
     * @param {string} remoteJid
     * @param {string} WAPresence
     * @example await sendPresenceUpdate("xxxxxxxxxxx@c.us" || "xxxxxxxxxxxxxxxxxx@g.us", "recording")
     */
    sendPresenceUpdate: (remoteJid: any, WAPresence: any) => Promise<void>;
    /**
     * @param {string} remoteJid
     * @param {string} url
     * @param {object} stickerOptions
     * @param {any} messages - optional
     * @example await sendSticker("xxxxxxxxxxx@c.us" || "xxxxxxxxxxxxxxxxxx@g.us", "https://dn/image.png" || "https://dn/image.gif" || "https://dn/image.mp4", {pack: 'User', author: 'Me'} messages)
     */
    sendSticker: (remoteJid: any, url: string | Buffer, stickerOptions: Partial<IStickerOptions>, messages?: any) => Promise<void>;
    private getMimeType;
    private generateFileName;
    /**
     * Return Path absolute
     * @param ctx
     * @param options
     * @returns
     */
    saveFile: (ctx: Partial<WAMessage & BotContext>, options?: {
        path: string;
    }) => Promise<string>;
    private shouldReconnect;
    private delayedReconnect;
}
export { BaileysProvider };
//# sourceMappingURL=bailey.d.ts.map